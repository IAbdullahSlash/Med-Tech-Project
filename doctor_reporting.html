<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Panchakarma Admin Dashboard</title>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <!-- Library for PDF and Excel export -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/html2canvas/1.4.1/html2canvas.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/tableexport@5.2.0/dist/js/tableexport.min.js"></script>

    <script>
        tailwind.config = {
            theme: {
                extend: {
                    colors: {
                        'ayur-green': '#4CAF50',
                        'ayur-light-green': '#A5D6A7',
                        'ayur-brown': '#795548',
                        'ayur-light-brown': '#D7CCC8',
                        'ayur-beige': '#FFF8E1',
                        'ayur-cream': '#F8F4E3',
                        'ayur-dark-text': '#3E2723',
                    },
                    fontFamily: {
                        sans: ['Inter', 'sans-serif'],
                    },
                }
            }
        }
    </script>
    <style>
        body {
            font-family: 'Inter', sans-serif;
            background-color: #F0F2F5;
        }
        /* Custom class for clickable cards */
        .dashboard-card {
            cursor: pointer;
            transition: all 0.3s ease-in-out;
        }
        .dashboard-card:hover {
            box-shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.1), 0 4px 6px -2px rgba(0, 0, 0, 0.05);
            transform: translateY(-3px);
        }
    </style>
</head>
<body class="flex min-h-screen text-ayur-dark-text bg-ayur-beige">

    <!-- Sidebar Navigation -->
    <aside class="w-64 bg-ayur-cream p-6 shadow-lg transform -translate-x-full md:translate-x-0 transition-transform duration-300 ease-in-out z-50 fixed md:relative">
        <div class="flex items-center space-x-2 mb-8">
            <svg class="w-8 h-8 text-ayur-brown" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"></path></svg>
            <span class="text-xl font-bold text-ayur-brown">Wellness Admin</span>
        </div>
        <nav class="space-y-4">
            <a href="#" data-page="dashboard" class="nav-link flex items-center space-x-3 p-3 rounded-lg bg-ayur-green text-white font-semibold shadow-md transition-transform duration-200 hover:scale-105">
                <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 12l2-2m0 0l7-7 7 7M5 10v10a1 1 0 001 1h3m10-11l2 2m0 0l7-7 7 7m0 0l-7 7"></path></svg>
                <span>Dashboard</span>
            </a>
            <a href="#" data-page="patients" class="nav-link flex items-center space-x-3 p-3 rounded-lg text-ayur-brown hover:bg-ayur-light-brown transition-colors duration-200">
                <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"></path></svg>
                <span>Patients</span>
            </a>
            <a href="#" data-page="appointments" class="nav-link flex items-center space-x-3 p-3 rounded-lg text-ayur-brown hover:bg-ayur-light-brown transition-colors duration-200">
                <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 7V3m8 4V3m-9 8h.01M16 16h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"></path></svg>
                <span>Appointments</span>
            </a>
            <a href="#" data-page="reports" class="nav-link flex items-center space-x-3 p-3 rounded-lg text-ayur-brown hover:bg-ayur-light-brown transition-colors duration-200">
                <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 19V6a2 2 0 00-2-2H5a2 2 0 00-2 2v13M9 19a2 2 0 01-2 2H5a2 2 0 01-2-2M9 19v-6a2 2 0 012-2h2a2 2 0 012 2v6M16 16v3a2 2 0 002 2h2a2 2 0 002-2v-3"></path></svg>
                <span>Reports</span>
            </a>
            <a href="#" data-page="inventory" class="nav-link flex items-center space-x-3 p-3 rounded-lg text-ayur-brown hover:bg-ayur-light-brown transition-colors duration-200">
                <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 6.253v13m0-13C10.832 5.468 9.248 5.425 8 5.5c-1.096.071-2.203.23-3.328.444C2.493 6.64 1.5 8.169 1.5 9.805v4.39c0 1.636.993 3.165 2.172 3.361.996.183 2.023.284 3.064.284 1.127 0 2.228-.094 3.29-.283 1.059-.19 2.083-.418 3.093-.653a15.704 15.704 0 003.551-.926c1.155-.371 2.247-.942 3.228-1.636"></path></svg>
                <span>Inventory</span>
            </a>
        </nav>
    </aside>

    <!-- Main Content -->
    <main class="flex-1 p-6 md:p-10">
        <!-- Header -->
        <header class="flex justify-between items-center mb-6">
            <h1 id="page-title" class="text-3xl font-bold text-ayur-brown">Dashboard</h1>
            <div class="flex items-center space-x-4">
                <button id="menu-btn" class="md:hidden p-2 rounded-lg text-ayur-brown bg-ayur-light-brown hover:bg-ayur-light-green transition-colors">
                    <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16M4 18h16"></path></svg>
                </button>
                <span class="font-semibold text-ayur-brown">Dr. Sharma</span>
                <div class="w-10 h-10 bg-ayur-light-green rounded-full flex items-center justify-center font-bold text-ayur-dark-text">DS</div>
            </div>
        </header>

        <!-- Main content container -->
        <div id="content-container">
            <!-- Content will be injected here by JavaScript -->
        </div>

    </main>

    <script>
        document.addEventListener('DOMContentLoaded', () => {
            const contentContainer = document.getElementById('content-container');
            const pageTitle = document.getElementById('page-title');
            const navLinks = document.querySelectorAll('.nav-link');
            const sidebar = document.querySelector('aside');
            const menuBtn = document.getElementById('menu-btn');
            let myCharts = {};

            // Render the dashboard on initial load
            renderPage('dashboard');

            // Add click listeners to sidebar navigation links
            navLinks.forEach(link => {
                link.addEventListener('click', (e) => {
                    e.preventDefault();
                    const page = e.currentTarget.dataset.page;
                    renderPage(page);

                    // Update active link and sidebar visibility
                    updateSidebarActiveState(page);
                    
                    sidebar.classList.add('-translate-x-full'); // Hide sidebar on mobile
                });
            });

            // Mobile menu toggle
            menuBtn.addEventListener('click', () => {
                sidebar.classList.toggle('-translate-x-full');
            });
            
            // Function to update the active state of the sidebar links
            function updateSidebarActiveState(activePage) {
                 navLinks.forEach(l => {
                    l.classList.remove('bg-ayur-green', 'text-white');
                    l.classList.add('text-ayur-brown', 'hover:bg-ayur-light-brown');
                });

                // Only set active state for links that exist in the sidebar
                const activeLink = document.querySelector(`.nav-link[data-page="${activePage}"]`);
                if (activeLink) {
                    activeLink.classList.add('bg-ayur-green', 'text-white');
                    activeLink.classList.remove('text-ayur-brown', 'hover:bg-ayur-light-brown');
                }
            }


            // Function to dynamically render the correct page content
            function renderPage(page) {
                // Clear existing content and destroy old charts
                contentContainer.innerHTML = '';
                for (let chart in myCharts) {
                    if (myCharts[chart] && typeof myCharts[chart].destroy === 'function') {
                        myCharts[chart].destroy();
                    }
                }
                myCharts = {};

                // Update page title
                pageTitle.textContent = page.split('-').map(word => word.charAt(0).toUpperCase() + word.slice(1)).join(' ');

                switch (page) {
                    case 'dashboard':
                        renderDashboard();
                        break;
                    case 'patients':
                        renderPatients();
                        break;
                    case 'appointments':
                        renderAppointments();
                        break;
                    case 'reports':
                        renderReports();
                        break;
                    case 'inventory':
                        renderInventory();
                        break;
                    // New views for clickable cards
                    case 'therapies-details':
                        renderTherapiesDetails();
                        break;
                    case 'completed-details':
                        renderCompletedDetails();
                        break;
                }
            }

            // Function to handle dashboard card clicks
            function setupDashboardCardListeners() {
                document.querySelectorAll('.dashboard-card').forEach(card => {
                    card.addEventListener('click', (e) => {
                        const page = e.currentTarget.dataset.page;
                        if (page) {
                            renderPage(page);
                            // Highlight the corresponding sidebar link if it exists (e.g., 'patients', 'inventory')
                            updateSidebarActiveState(page);
                        }
                    });
                });
            }

            function renderDashboard() {
                contentContainer.innerHTML = `
                    <div class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-6 mb-8">
                        <!-- Card 1: Total Patients (Clickable to Patients list) -->
                        <div data-page="patients" class="dashboard-card bg-white p-6 rounded-2xl shadow-lg flex items-center space-x-4">
                            <div class="p-3 bg-ayur-light-green rounded-xl">
                                <svg class="w-8 h-8 text-ayur-green" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17 20h-10a2 2 0 01-2-2V6a2 2 0 012-2h10a2 2 0 012 2v12a2 2 0 01-2 2zM9 11l-2 2m0 0l2 2m-2-2l2-2"></path></svg>
                            </div>
                            <div>
                                <div class="text-xl font-medium text-gray-500">Total Patients</div>
                                <div class="text-4xl font-bold text-ayur-dark-text">1,580</div>
                            </div>
                        </div>
                        
                        <!-- Card 2: Ongoing Therapies (Clickable to Therapies Details list) -->
                        <div data-page="therapies-details" class="dashboard-card bg-white p-6 rounded-2xl shadow-lg flex items-center space-x-4">
                            <div class="p-3 bg-ayur-light-green rounded-xl">
                                <svg class="w-8 h-8 text-ayur-green" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"></path></svg>
                            </div>
                            <div>
                                <div class="text-xl font-medium text-gray-500">Ongoing Therapies</div>
                                <div class="text-4xl font-bold text-ayur-dark-text">135</div>
                            </div>
                        </div>
                        
                        <!-- Card 3: Completed This Week (Clickable to Completed Details list) -->
                        <div data-page="completed-details" class="dashboard-card bg-white p-6 rounded-2xl shadow-lg flex items-center space-x-4">
                            <div class="p-3 bg-ayur-light-green rounded-xl">
                                <svg class="w-8 h-8 text-ayur-green" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 012-2h2a2 2 0 012 2M9 5a2 2 0 01-2 2v12m8 0a2 2 0 012-2v-2"></path></svg>
                            </div>
                            <div>
                                <div class="text-xl font-medium text-gray-500">Completed This Week</div>
                                <div class="text-4xl font-bold text-ayur-dark-text">38</div>
                            </div>
                        </div>
                        
                        <!-- Card 4: Resources Used (Clickable to Inventory list) -->
                        <div data-page="inventory" class="dashboard-card bg-white p-6 rounded-2xl shadow-lg flex items-center space-x-4">
                            <div class="p-3 bg-ayur-light-green rounded-xl">
                                <svg class="w-8 h-8 text-ayur-green" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 12a3 3 0 11-6 0 3 3 0 016 0z"></path></svg>
                            </div>
                            <div>
                                <div class="text-xl font-medium text-gray-500">Resources Used (L)</div>
                                <div class="text-4xl font-bold text-ayur-dark-text">850</div>
                            </div>
                        </div>
                    </div>

                    <div class="grid grid-cols-1 lg:grid-cols-2 gap-6 mb-8">
                        <div class="bg-white p-6 rounded-2xl shadow-lg">
                            <h2 class="text-xl font-semibold mb-4 text-ayur-brown">Patient Admissions Over Time</h2>
                            <canvas id="admissionsChart"></canvas>
                        </div>
                        <div class="bg-white p-6 rounded-2xl shadow-lg flex flex-col items-center">
                            <h2 class="text-xl font-semibold mb-4 text-ayur-brown">Therapies Performed</h2>
                            <canvas id="therapiesChart" class="max-w-xs"></canvas>
                        </div>
                    </div>
                    <div class="bg-white p-6 rounded-2xl shadow-lg mb-8">
                        <h2 class="text-xl font-semibold mb-4 text-ayur-brown">Average Therapy Duration (Days)</h2>
                        <canvas id="durationChart"></canvas>
                    </div>

                    <div class="grid grid-cols-1 lg:grid-cols-3 gap-6 mb-8">
                        <div class="lg:col-span-2 bg-white p-6 rounded-2xl shadow-lg overflow-x-auto">
                            <div class="flex justify-between items-center mb-4">
                                <h2 class="text-xl font-semibold text-ayur-brown">Patient Overview</h2>
                                <div class="flex space-x-2">
                                    <button id="downloadPdfBtn" class="bg-ayur-green text-white px-4 py-2 rounded-lg font-medium transition-colors hover:bg-ayur-brown">Download PDF</button>
                                    <button id="exportExcelBtn" class="bg-ayur-green text-white px-4 py-2 rounded-lg font-medium transition-colors hover:bg-ayur-brown">Export Excel</button>
                                </div>
                            </div>
                            <table id="patientTable" class="min-w-full divide-y divide-gray-200">
                                <thead class="bg-ayur-cream">
                                    <tr>
                                        <th scope="col" class="px-6 py-3 text-left text-xs font-semibold uppercase tracking-wider text-ayur-brown">Name</th>
                                        <th scope="col" class="px-6 py-3 text-left text-xs font-semibold uppercase tracking-wider text-ayur-brown">ID</th>
                                        <th scope="col" class="px-6 py-3 text-left text-xs font-semibold uppercase tracking-wider text-ayur-brown">Therapy Type</th>
                                        <th scope="col" class="px-6 py-3 text-left text-xs font-semibold uppercase tracking-wider text-ayur-brown">Status</th>
                                        <th scope="col" class="px-6 py-3 text-left text-xs font-semibold uppercase tracking-wider text-ayur-brown">Last Session</th>
                                    </tr>
                                </thead>
                                <tbody class="bg-white divide-y divide-gray-200">
                                    <!-- Increased mock data here -->
                                    <tr><td class="px-6 py-4 whitespace-nowrap">Ramesh T.</td><td class="px-6 py-4 whitespace-nowrap">P-014</td><td class="px-6 py-4 whitespace-nowrap">Basti</td><td class="px-6 py-4 whitespace-nowrap"><span class="px-2 inline-flex text-xs leading-5 font-semibold rounded-full bg-ayur-light-green text-ayur-green">Ongoing</span></td><td class="px-6 py-4 whitespace-nowrap">2025-09-29</td></tr>
                                    <tr><td class="px-6 py-4 whitespace-nowrap">Sita K.</td><td class="px-6 py-4 whitespace-nowrap">Virechana</td><td class="px-6 py-4 whitespace-nowrap">Virechana</td><td class="px-6 py-4 whitespace-nowrap"><span class="px-2 inline-flex text-xs leading-5 font-semibold rounded-full bg-ayur-light-brown text-ayur-brown">Completed</span></td><td class="px-6 py-4 whitespace-nowrap">2025-09-28</td></tr>
                                    <tr><td class="px-6 py-4 whitespace-nowrap">Vikas D.</td><td class="px-6 py-4 whitespace-nowrap">P-016</td><td class="px-6 py-4 whitespace-nowrap">Vamana</td><td class="px-6 py-4 whitespace-nowrap"><span class="px-2 inline-flex text-xs leading-5 font-semibold rounded-full bg-yellow-100 text-yellow-800">Pending</span></td><td class="px-6 py-4 whitespace-nowrap">N/A</td></tr>
                                    <tr><td class="px-6 py-4 whitespace-nowrap">Priya M.</td><td class="px-6 py-4 whitespace-nowrap">P-017</td><td class="px-6 py-4 whitespace-nowrap">Nasya</td><td class="px-6 py-4 whitespace-nowrap"><span class="px-2 inline-flex text-xs leading-5 font-semibold rounded-full bg-ayur-light-green text-ayur-green">Ongoing</span></td><td class="px-6 py-4 whitespace-nowrap">2025-09-27</td></tr>
                                    <tr><td class="px-6 py-4 whitespace-nowrap">Gautam R.</td><td class="px-6 py-4 whitespace-nowrap">P-018</td><td class="px-6 py-4 whitespace-nowrap">Basti</td><td class="px-6 py-4 whitespace-nowrap"><span class="px-2 inline-flex text-xs leading-5 font-semibold rounded-full bg-ayur-light-brown text-ayur-brown">Completed</span></td><td class="px-6 py-4 whitespace-nowrap">2025-09-26</td></tr>
                                    <tr><td class="px-6 py-4 whitespace-nowrap">John Doe</td><td class="px-6 py-4 whitespace-nowrap">P-001</td><td class="px-6 py-4 whitespace-nowrap">Vamana</td><td class="px-6 py-4 whitespace-nowrap"><span class="px-2 inline-flex text-xs leading-5 font-semibold rounded-full bg-ayur-light-green text-ayur-green">Ongoing</span></td><td class="px-6 py-4 whitespace-nowrap">2024-09-20</td></tr>
                                    <tr><td class="px-6 py-4 whitespace-nowrap">Jane Smith</td><td class="px-6 py-4 whitespace-nowrap">P-002</td><td class="px-6 py-4 whitespace-nowrap">Nasya</td><td class="px-6 py-4 whitespace-nowrap"><span class="px-2 inline-flex text-xs leading-5 font-semibold rounded-full bg-ayur-light-brown text-ayur-brown">Completed</span></td><td class="px-6 py-4 whitespace-nowrap">2024-09-18</td></tr>
                                    <tr><td class="px-6 py-4 whitespace-nowrap">Michael Johnson</td><td class="px-6 py-4 whitespace-nowrap">P-003</td><td class="px-6 py-4 whitespace-nowrap">Virechana</td><td class="px-6 py-4 whitespace-nowrap"><span class="px-2 inline-flex text-xs leading-5 font-semibold rounded-full bg-yellow-100 text-yellow-800">Pending</span></td><td class="px-6 py-4 whitespace-nowrap">N/A</td></tr>
                                    <tr><td class="px-6 py-4 whitespace-nowrap">Emily Davis</td><td class="px-6 py-4 whitespace-nowrap">P-004</td><td class="px-6 py-4 whitespace-nowrap">Basti</td><td class="px-6 py-4 whitespace-nowrap"><span class="px-2 inline-flex text-xs leading-5 font-semibold rounded-full bg-ayur-light-green text-ayur-green">Ongoing</span></td><td class="px-6 py-4 whitespace-nowrap">2024-09-19</td></tr>
                                    <tr><td class="px-6 py-4 whitespace-nowrap">David Wilson</td><td class="px-6 py-4 whitespace-nowrap">P-005</td><td class="px-6 py-4 whitespace-nowrap">Virechana</td><td class="px-6 py-4 whitespace-nowrap"><span class="px-2 inline-flex text-xs leading-5 font-semibold rounded-full bg-ayur-light-brown text-ayur-brown">Completed</span></td><td class="px-6 py-4 whitespace-nowrap">2024-09-15</td></tr>
                                    <tr><td class="px-6 py-4 whitespace-nowrap">Olivia Brown</td><td class="px-6 py-4 whitespace-nowrap">P-006</td><td class="px-6 py-4 whitespace-nowrap">Vamana</td><td class="px-6 py-4 whitespace-nowrap"><span class="px-2 inline-flex text-xs leading-5 font-semibold rounded-full bg-ayur-light-green text-ayur-green">Ongoing</span></td><td class="px-6 py-4 whitespace-nowrap">2024-09-21</td></tr>
                                    <tr><td class="px-6 py-4 whitespace-nowrap">James Taylor</td><td class="px-6 py-4 whitespace-nowrap">P-007</td><td class="px-6 py-4 whitespace-nowrap">Basti</td><td class="px-6 py-4 whitespace-nowrap"><span class="px-2 inline-flex text-xs leading-5 font-semibold rounded-full bg-ayur-light-brown text-ayur-brown">Completed</span></td><td class="px-6 py-4 whitespace-nowrap">2024-09-17</td></tr>
                                    <tr><td class="px-6 py-4 whitespace-nowrap">Sophia Miller</td><td class="px-6 py-4 whitespace-nowrap">P-008</td><td class="px-6 py-4 whitespace-nowrap">Nasya</td><td class="px-6 py-4 whitespace-nowrap"><span class="px-2 inline-flex text-xs leading-5 font-semibold rounded-full bg-ayur-light-green text-ayur-green">Ongoing</span></td><td class="px-6 py-4 whitespace-nowrap">2024-09-22</td></tr>
                                </tbody>
                            </table>
                        </div>

                        <div class="bg-white p-6 rounded-2xl shadow-lg">
                            <h2 class="text-xl font-semibold mb-4 text-ayur-brown">Notifications & Reminders</h2>
                            <ul class="space-y-4">
                                <li class="flex items-start space-x-3">
                                    <svg class="w-6 h-6 text-red-500" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 9v2m0 4h.01m-6.938 4.75A9 9 0 0112 3a9 9 0 016.938 1.25M21 12a9 9 0 01-9 9m0-18a9 9 0 019 9m0-18A9 9 0 0112 3a9 9 0 016.938 1.25"></path></svg>
                                    <div>
                                        <p class="font-medium">Low Stock Alert: Brahmi Oil</p>
                                        <p class="text-sm text-gray-500">Only 5 bottles left. Please reorder.</p>
                                    </div>
                                </li>
                                <li class="flex items-start space-x-3">
                                    <svg class="w-6 h-6 text-ayur-green" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 7V3m8 4V3m-9 8h.01M16 16h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"></path></svg>
                                    <div>
                                        <p class="font-medium">Upcoming Session: John Doe</p>
                                        <p class="text-sm text-gray-500">Scheduled for Vamana therapy tomorrow, 10 AM.</p>
                                    </div>
                                </li>
                                <li class="flex items-start space-x-3">
                                    <svg class="w-6 h-6 text-red-500" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 9v2m0 4h.01m-6.938 4.75A9 9 0 0112 3a9 9 0 016.938 1.25M21 12a9 9 0 01-9 9m0-18a9 9 0 019 9m0-18A9 9 0 0112 3a9 9 0 016.938 1.25"></path></svg>
                                    <div>
                                        <p class="font-medium">Low Stock Alert: Triphala Powder</p>
                                        <p class="text-sm text-gray-500">Running low. Order more by end of week.</p>
                                    </div>
                                </li>
                            </ul>
                        </div>
                    </div>
                `;
                initializeDashboardCharts();
                setupExportButtons();
                setupDashboardCardListeners(); // Initialize listeners
            }

            function renderPatients() {
                contentContainer.innerHTML = `
                    <div class="bg-white p-6 rounded-2xl shadow-lg">
                        <div class="flex justify-between items-center mb-4">
                            <h2 class="text-xl font-semibold text-ayur-brown">All Patients List</h2>
                            <div class="flex space-x-2">
                                <button id="downloadPdfBtn" class="bg-ayur-green text-white px-4 py-2 rounded-lg font-medium transition-colors hover:bg-ayur-brown">Download PDF</button>
                                <button id="exportExcelBtn" class="bg-ayur-green text-white px-4 py-2 rounded-lg font-medium transition-colors hover:bg-ayur-brown">Export Excel</button>
                            </div>
                        </div>
                        <div class="overflow-x-auto">
                            <table id="patientTable" class="min-w-full divide-y divide-gray-200">
                                <thead class="bg-ayur-cream">
                                    <tr>
                                        <th scope="col" class="px-6 py-3 text-left text-xs font-semibold uppercase tracking-wider text-ayur-brown">Name</th>
                                        <th scope="col" class="px-6 py-3 text-left text-xs font-semibold uppercase tracking-wider text-ayur-brown">ID</th>
                                        <th scope="col" class="px-6 py-3 text-left text-xs font-semibold uppercase tracking-wider text-ayur-brown">Therapy Type</th>
                                        <th scope="col" class="px-6 py-3 text-left text-xs font-semibold uppercase tracking-wider text-ayur-brown">Status</th>
                                        <th scope="col" class="px-6 py-3 text-left text-xs font-semibold uppercase tracking-wider text-ayur-brown">Last Session</th>
                                        <th scope="col" class="px-6 py-3 text-left text-xs font-semibold uppercase tracking-wider text-ayur-brown">Therapist</th>
                                    </tr>
                                </thead>
                                <tbody class="bg-white divide-y divide-gray-200">
                                    <!-- Using the previous patient list (but updated count is 1,580) -->
                                    <tr><td class="px-6 py-4 whitespace-nowrap">Ramesh T.</td><td class="px-6 py-4 whitespace-nowrap">P-014</td><td class="px-6 py-4 whitespace-nowrap">Basti</td><td class="px-2 inline-flex text-xs leading-5 font-semibold rounded-full bg-ayur-light-green text-ayur-green">Ongoing</td><td class="px-6 py-4 whitespace-nowrap">2025-09-29</td><td class="px-6 py-4 whitespace-nowrap">Dr. Sharma</td></tr>
                                    <tr><td class="px-6 py-4 whitespace-nowrap">Sita K.</td><td class="px-6 py-4 whitespace-nowrap">P-015</td><td class="px-6 py-4 whitespace-nowrap">Virechana</td><td class="px-2 inline-flex text-xs leading-5 font-semibold rounded-full bg-ayur-light-brown text-ayur-brown">Completed</td><td class="px-6 py-4 whitespace-nowrap">2025-09-28</td><td class="px-6 py-4 whitespace-nowrap">Dr. Patel</td></tr>
                                    <tr><td class="px-6 py-4 whitespace-nowrap">Vikas D.</td><td class="px-6 py-4 whitespace-nowrap">P-016</td><td class="px-6 py-4 whitespace-nowrap">Vamana</td><td class="px-2 inline-flex text-xs leading-5 font-semibold rounded-full bg-yellow-100 text-yellow-800">Pending</td><td class="px-6 py-4 whitespace-nowrap">N/A</td><td class="px-6 py-4 whitespace-nowrap">Dr. Singh</td></tr>
                                    <tr><td class="px-6 py-4 whitespace-nowrap">Priya M.</td><td class="px-6 py-4 whitespace-nowrap">P-017</td><td class="px-6 py-4 whitespace-nowrap">Nasya</td><td class="px-2 inline-flex text-xs leading-5 font-semibold rounded-full bg-ayur-light-green text-ayur-green">Ongoing</td><td class="px-6 py-4 whitespace-nowrap">2025-09-27</td><td class="px-6 py-4 whitespace-nowrap">Dr. Sharma</td></tr>
                                    <tr><td class="px-6 py-4 whitespace-nowrap">Gautam R.</td><td class="px-6 py-4 whitespace-nowrap">P-018</td><td class="px-6 py-4 whitespace-nowrap">Basti</td><td class="px-2 inline-flex text-xs leading-5 font-semibold rounded-full bg-ayur-light-brown text-ayur-brown">Completed</td><td class="px-6 py-4 whitespace-nowrap">2025-09-26</td><td class="px-6 py-4 whitespace-nowrap">Dr. Kaur</td></tr>
                                    <tr><td class="px-6 py-4 whitespace-nowrap">John Doe</td><td class="px-6 py-4 whitespace-nowrap">P-001</td><td class="px-6 py-4 whitespace-nowrap">Vamana</td><td class="px-2 inline-flex text-xs leading-5 font-semibold rounded-full bg-ayur-light-green text-ayur-green">Ongoing</td><td class="px-6 py-4 whitespace-nowrap">2024-09-20</td><td class="px-6 py-4 whitespace-nowrap">Dr. Sharma</td></tr>
                                    <tr><td class="px-6 py-4 whitespace-nowrap">Jane Smith</td><td class="px-6 py-4 whitespace-nowrap">P-002</td><td class="px-6 py-4 whitespace-nowrap">Nasya</td><td class="px-2 inline-flex text-xs leading-5 font-semibold rounded-full bg-ayur-light-brown text-ayur-brown">Completed</td><td class="px-6 py-4 whitespace-nowrap">2024-09-18</td><td class="px-6 py-4 whitespace-nowrap">Dr. Patel</td></tr>
                                    <tr><td class="px-6 py-4 whitespace-nowrap">Michael Johnson</td><td class="px-6 py-4 whitespace-nowrap">P-003</td><td class="px-6 py-4 whitespace-nowrap">Virechana</td><td class="px-2 inline-flex text-xs leading-5 font-semibold rounded-full bg-yellow-100 text-yellow-800">Pending</td><td class="px-6 py-4 whitespace-nowrap">N/A</td><td class="px-6 py-4 whitespace-nowrap">Dr. Singh</td></tr>
                                    <tr><td class="px-6 py-4 whitespace-nowrap">Emily Davis</td><td class="px-6 py-4 whitespace-nowrap">P-004</td><td class="px-6 py-4 whitespace-nowrap">Basti</td><td class="px-2 inline-flex text-xs leading-5 font-semibold rounded-full bg-ayur-light-green text-ayur-green">Ongoing</td><td class="px-6 py-4 whitespace-nowrap">2024-09-19</td><td class="px-6 py-4 whitespace-nowrap">Dr. Sharma</td></tr>
                                    <tr><td class="px-6 py-4 whitespace-nowrap">David Wilson</td><td class="px-6 py-4 whitespace-nowrap">P-005</td><td class="px-6 py-4 whitespace-nowrap">Virechana</td><td class="px-2 inline-flex text-xs leading-5 font-semibold rounded-full bg-ayur-light-brown text-ayur-brown">Completed</td><td class="px-6 py-4 whitespace-nowrap">2024-09-15</td><td class="px-6 py-4 whitespace-nowrap">Dr. Kaur</td></tr>
                                    <tr><td class="px-6 py-4 whitespace-nowrap">Olivia Brown</td><td class="px-6 py-4 whitespace-nowrap">P-006</td><td class="px-6 py-4 whitespace-nowrap">Vamana</td><td class="px-2 inline-flex text-xs leading-5 font-semibold rounded-full bg-ayur-light-green text-ayur-green">Ongoing</td><td class="px-6 py-4 whitespace-nowrap">2024-09-21</td><td class="px-6 py-4 whitespace-nowrap">Dr. Sharma</td></tr>
                                    <tr><td class="px-6 py-4 whitespace-nowrap">James Taylor</td><td class="px-6 py-4 whitespace-nowrap">P-007</td><td class="px-6 py-4 whitespace-nowrap">Basti</td><td class="px-2 inline-flex text-xs leading-5 font-semibold rounded-full bg-ayur-light-brown text-ayur-brown">Completed</td><td class="px-6 py-4 whitespace-nowrap">2024-09-17</td><td class="px-6 py-4 whitespace-nowrap">Dr. Patel</td></tr>
                                    <tr><td class="px-6 py-4 whitespace-nowrap">Sophia Miller</td><td class="px-6 py-4 whitespace-nowrap">P-008</td><td class="px-6 py-4 whitespace-nowrap">Nasya</td><td class="px-2 inline-flex text-xs leading-5 font-semibold rounded-full bg-ayur-light-green text-ayur-green">Ongoing</td><td class="px-6 py-4 whitespace-nowrap">2024-09-22</td><td class="px-6 py-4 whitespace-nowrap">Dr. Singh</td></tr>
                                    <tr><td class="px-6 py-4 whitespace-nowrap">Liam Johnson</td><td class="px-6 py-4 whitespace-nowrap">P-009</td><td class="px-6 py-4 whitespace-nowrap">Nasya</td><td class="px-2 inline-flex text-xs leading-5 font-semibold rounded-full bg-ayur-light-green text-ayur-green">Ongoing</td><td class="px-6 py-4 whitespace-nowrap">2024-09-21</td><td class="px-6 py-4 whitespace-nowrap">Dr. Kaur</td></tr>
                                    <tr><td class="px-6 py-4 whitespace-nowrap">Mia Garcia</td><td class="px-6 py-4 whitespace-nowrap">P-010</td><td class="px-6 py-4 whitespace-nowrap">Virechana</td><td class="px-2 inline-flex text-xs leading-5 font-semibold rounded-full bg-ayur-light-brown text-ayur-brown">Completed</td><td class="px-6 py-4 whitespace-nowrap">2024-09-19</td><td class="px-6 py-4 whitespace-nowrap">Dr. Patel</td></tr>
                                    <tr><td class="px-6 py-4 whitespace-nowrap">Noah Rodriguez</td><td class="px-6 py-4 whitespace-nowrap">P-011</td><td class="px-6 py-4 whitespace-nowrap">Basti</td><td class="px-2 inline-flex text-xs leading-5 font-semibold rounded-full bg-yellow-100 text-yellow-800">Pending</td><td class="px-6 py-4 whitespace-nowrap">N/A</td><td class="px-6 py-4 whitespace-nowrap">Dr. Singh</td></tr>
                                    <tr><td class="px-6 py-4 whitespace-nowrap">Isabella Lopez</td><td class="px-6 py-4 whitespace-nowrap">P-012</td><td class="px-6 py-4 whitespace-nowrap">Vamana</td><td class="px-2 inline-flex text-xs leading-5 font-semibold rounded-full bg-ayur-light-green text-ayur-green">Ongoing</td><td class="px-6 py-4 whitespace-nowrap">2024-09-20</td><td class="px-6 py-4 whitespace-nowrap">Dr. Sharma</td></tr>
                                    <tr><td class="px-6 py-4 whitespace-nowrap">William Hernandez</td><td class="px-6 py-4 whitespace-nowrap">P-013</td><td class="px-6 py-4 whitespace-nowrap">Virechana</td><td class="px-2 inline-flex text-xs leading-5 font-semibold rounded-full bg-ayur-light-brown text-ayur-brown">Completed</td><td class="px-6 py-4 whitespace-nowrap">2024-09-17</td><td class="px-6 py-4 whitespace-nowrap">Dr. Kaur</td></tr>
                                </tbody>
                            </table>
                        </div>
                    </div>
                `;
                setupExportButtons();
            }

            function renderTherapiesDetails() {
                 contentContainer.innerHTML = `
                    <div class="bg-white p-6 rounded-2xl shadow-lg">
                        <div class="flex justify-between items-center mb-4">
                            <h2 class="text-xl font-semibold text-ayur-brown">Active Ongoing Therapies (135 patients)</h2>
                            <div class="flex space-x-2">
                                <button id="downloadPdfBtn" class="bg-ayur-green text-white px-4 py-2 rounded-lg font-medium transition-colors hover:bg-ayur-brown">Download PDF</button>
                                <button id="exportExcelBtn" class="bg-ayur-green text-white px-4 py-2 rounded-lg font-medium transition-colors hover:bg-ayur-brown">Export Excel</button>
                            </div>
                        </div>
                        <div class="overflow-x-auto">
                            <table id="therapiesTable" class="min-w-full divide-y divide-gray-200">
                                <thead class="bg-ayur-cream">
                                    <tr>
                                        <th scope="col" class="px-6 py-3 text-left text-xs font-semibold uppercase tracking-wider text-ayur-brown">Patient Name</th>
                                        <th scope="col" class="px-6 py-3 text-left text-xs font-semibold uppercase tracking-wider text-ayur-brown">Therapy</th>
                                        <th scope="col" class="px-6 py-3 text-left text-xs font-semibold uppercase tracking-wider text-ayur-brown">Start Date</th>
                                        <th scope="col" class="px-6 py-3 text-left text-xs font-semibold uppercase tracking-wider text-ayur-brown">Days Remaining</th>
                                        <th scope="col" class="px-6 py-3 text-left text-xs font-semibold uppercase tracking-wider text-ayur-brown">Therapist</th>
                                    </tr>
                                </thead>
                                <tbody class="bg-white divide-y divide-gray-200">
                                    <!-- Increased mock data here -->
                                    <tr><td class="px-6 py-4 whitespace-nowrap">Ramesh T.</td><td class="px-6 py-4 whitespace-nowrap">Basti (10 Days)</td><td class="px-6 py-4 whitespace-nowrap">2025-09-25</td><td class="px-6 py-4 whitespace-nowrap">6</td><td class="px-6 py-4 whitespace-nowrap">Dr. Sharma</td></tr>
                                    <tr><td class="px-6 py-4 whitespace-nowrap">Priya M.</td><td class="px-6 py-4 whitespace-nowrap">Nasya (5 Days)</td><td class="px-6 py-4 whitespace-nowrap">2025-09-28</td><td class="px-6 py-4 whitespace-nowrap">3</td><td class="px-6 py-4 whitespace-nowrap">Dr. Sharma</td></tr>
                                    <tr><td class="px-6 py-4 whitespace-nowrap">Anand S.</td><td class="px-6 py-4 whitespace-nowrap">Virechana (8 Days)</td><td class="px-6 py-4 whitespace-nowrap">2025-09-20</td><td class="px-6 py-4 whitespace-nowrap">2</td><td class="px-6 py-4 whitespace-nowrap">Dr. Patel</td></tr>
                                    <tr><td class="px-6 py-4 whitespace-nowrap">Divya G.</td><td class="px-6 py-4 whitespace-nowrap">Vamana (7 Days)</td><td class="px-6 py-4 whitespace-nowrap">2025-09-24</td><td class="px-6 py-4 whitespace-nowrap">1</td><td class="px-6 py-4 whitespace-nowrap">Dr. Singh</td></tr>
                                    <tr><td class="px-6 py-4 whitespace-nowrap">Kiran L.</td><td class="px-6 py-4 whitespace-nowrap">Basti (10 Days)</td><td class="px-6 py-4 whitespace-nowrap">2025-09-22</td><td class="px-6 py-4 whitespace-nowrap">4</td><td class="px-6 py-4 whitespace-nowrap">Dr. Kaur</td></tr>
                                    <tr><td class="px-6 py-4 whitespace-nowrap">John Doe</td><td class="px-6 py-4 whitespace-nowrap">Vamana (7 Days)</td><td class="px-6 py-4 whitespace-nowrap">2024-09-18</td><td class="px-6 py-4 whitespace-nowrap">2</td><td class="px-6 py-4 whitespace-nowrap">Dr. Sharma</td></tr>
                                    <tr><td class="px-6 py-4 whitespace-nowrap">Emily Davis</td><td class="px-6 py-4 whitespace-nowrap">Basti (10 Days)</td><td class="px-6 py-4 whitespace-nowrap">2024-09-15</td><td class="px-6 py-4 whitespace-nowrap">5</td><td class="px-6 py-4 whitespace-nowrap">Dr. Sharma</td></tr>
                                    <tr><td class="px-6 py-4 whitespace-nowrap">Olivia Brown</td><td class="px-6 py-4 whitespace-nowrap">Vamana (7 Days)</td><td class="px-6 py-4 whitespace-nowrap">2024-09-19</td><td class="px-6 py-4 whitespace-nowrap">1</td><td class="px-6 py-4 whitespace-nowrap">Dr. Sharma</td></tr>
                                    <tr><td class="px-6 py-4 whitespace-nowrap">Sophia Miller</td><td class="px-6 py-4 whitespace-nowrap">Nasya (5 Days)</td><td class="px-6 py-4 whitespace-nowrap">2024-09-20</td><td class="px-6 py-4 whitespace-nowrap">5</td><td class="px-6 py-4 whitespace-nowrap">Dr. Singh</td></tr>
                                    <tr><td class="px-6 py-4 whitespace-nowrap">Liam Johnson</td><td class="px-6 py-4 whitespace-nowrap">Nasya (5 Days)</td><td class="px-6 py-4 whitespace-nowrap">2024-09-19</td><td class="px-6 py-4 whitespace-nowrap">1</td><td class="px-6 py-4 whitespace-nowrap">Dr. Kaur</td></tr>
                                    <tr><td class="px-6 py-4 whitespace-nowrap">Isabella Lopez</td><td class="px-6 py-4 whitespace-nowrap">Vamana (7 Days)</td><td class="px-6 py-4 whitespace-nowrap">2024-09-17</td><td class="px-6 py-4 whitespace-nowrap">3</td><td class="px-6 py-4 whitespace-nowrap">Dr. Sharma</td></tr>
                                </tbody>
                            </table>
                        </div>
                    </div>
                `;
                setupExportButtons();
            }
            
            function renderCompletedDetails() {
                 contentContainer.innerHTML = `
                    <div class="bg-white p-6 rounded-2xl shadow-lg">
                        <div class="flex justify-between items-center mb-4">
                            <h2 class="text-xl font-semibold text-ayur-brown">Therapies Completed This Week (38 patients)</h2>
                            <div class="flex space-x-2">
                                <button id="downloadPdfBtn" class="bg-ayur-green text-white px-4 py-2 rounded-lg font-medium transition-colors hover:bg-ayur-brown">Download PDF</button>
                                <button id="exportExcelBtn" class="bg-ayur-green text-white px-4 py-2 rounded-lg font-medium transition-colors hover:bg-ayur-brown">Export Excel</button>
                            </div>
                        </div>
                        <div class="overflow-x-auto">
                            <table id="completedTable" class="min-w-full divide-y divide-gray-200">
                                <thead class="bg-ayur-cream">
                                    <tr>
                                        <th scope="col" class="px-6 py-3 text-left text-xs font-semibold uppercase tracking-wider text-ayur-brown">Patient Name</th>
                                        <th scope="col" class="px-6 py-3 text-left text-xs font-semibold uppercase tracking-wider text-ayur-brown">Therapy</th>
                                        <th scope="col" class="px-6 py-3 text-left text-xs font-semibold uppercase tracking-wider text-ayur-brown">Completion Date</th>
                                        <th scope="col" class="px-6 py-3 text-left text-xs font-semibold uppercase tracking-wider text-ayur-brown">Duration (Days)</th>
                                        <th scope="col" class="px-6 py-3 text-left text-xs font-semibold uppercase tracking-wider text-ayur-brown">Therapist</th>
                                    </tr>
                                </thead>
                                <tbody class="bg-white divide-y divide-gray-200">
                                    <!-- Increased mock data here -->
                                    <tr><td class="px-6 py-4 whitespace-nowrap">Sita K.</td><td class="px-6 py-4 whitespace-nowrap">Virechana</td><td class="px-6 py-4 whitespace-nowrap">2025-09-28</td><td class="px-6 py-4 whitespace-nowrap">8</td><td class="px-6 py-4 whitespace-nowrap">Dr. Patel</td></tr>
                                    <tr><td class="px-6 py-4 whitespace-nowrap">Gautam R.</td><td class="px-6 py-4 whitespace-nowrap">Basti</td><td class="px-6 py-4 whitespace-nowrap">2025-09-26</td><td class="px-6 py-4 whitespace-nowrap">10</td><td class="px-6 py-4 whitespace-nowrap">Dr. Kaur</td></tr>
                                    <tr><td class="px-6 py-4 whitespace-nowrap">Rina V.</td><td class="px-6 py-4 whitespace-nowrap">Nasya</td><td class="px-6 py-4 whitespace-nowrap">2025-09-25</td><td class="px-6 py-4 whitespace-nowrap">5</td><td class="px-6 py-4 whitespace-nowrap">Dr. Sharma</td></tr>
                                    <tr><td class="px-6 py-4 whitespace-nowrap">Mohan P.</td><td class="px-6 py-4 whitespace-nowrap">Vamana</td><td class="px-6 py-4 whitespace-nowrap">2025-09-24</td><td class="px-6 py-4 whitespace-nowrap">7</td><td class="px-6 py-4 whitespace-nowrap">Dr. Singh</td></tr>
                                    <tr><td class="px-6 py-4 whitespace-nowrap">Jane Smith</td><td class="px-6 py-4 whitespace-nowrap">Nasya</td><td class="px-6 py-4 whitespace-nowrap">2024-09-22</td><td class="px-6 py-4 whitespace-nowrap">5</td><td class="px-6 py-4 whitespace-nowrap">Dr. Patel</td></tr>
                                    <tr><td class="px-6 py-4 whitespace-nowrap">David Wilson</td><td class="px-6 py-4 whitespace-nowrap">Virechana</td><td class="px-6 py-4 whitespace-nowrap">2024-09-21</td><td class="px-6 py-4 whitespace-nowrap">8</td><td class="px-6 py-4 whitespace-nowrap">Dr. Kaur</td></tr>
                                    <tr><td class="px-6 py-4 whitespace-nowrap">James Taylor</td><td class="px-6 py-4 whitespace-nowrap">Basti</td><td class="px-6 py-4 whitespace-nowrap">2024-09-20</td><td class="px-6 py-4 whitespace-nowrap">10</td><td class="px-6 py-4 whitespace-nowrap">Dr. Patel</td></tr>
                                    <tr><td class="px-6 py-4 whitespace-nowrap">Mia Garcia</td><td class="px-6 py-4 whitespace-nowrap">Virechana</td><td class="px-6 py-4 whitespace-nowrap">2024-09-19</td><td class="px-6 py-4 whitespace-nowrap">8</td><td class="px-6 py-4 whitespace-nowrap">Dr. Patel</td></tr>
                                    <tr><td class="px-6 py-4 whitespace-nowrap">William Hernandez</td><td class="px-6 py-4 whitespace-nowrap">Vamana</td><td class="px-6 py-4 whitespace-nowrap">2024-09-18</td><td class="px-6 py-4 whitespace-nowrap">7</td><td class="px-6 py-4 whitespace-nowrap">Dr. Kaur</td></tr>
                                </tbody>
                            </table>
                        </div>
                    </div>
                `;
                setupExportButtons();
            }

            function renderAppointments() {
                contentContainer.innerHTML = `
                    <div class="bg-white p-6 rounded-2xl shadow-lg">
                        <h2 class="text-2xl font-semibold mb-6 text-ayur-brown">Upcoming Appointments</h2>
                        <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                            <!-- Increased mock data here -->
                            <div class="bg-ayur-cream p-4 rounded-lg shadow-sm">
                                <p class="font-medium text-lg">Today, 4:00 PM</p>
                                <p class="text-ayur-dark-text">Patient: **Ramesh T.**</p>
                                <p class="text-gray-600">Therapy: Basti</p>
                            </div>
                            <div class="bg-ayur-cream p-4 rounded-lg shadow-sm">
                                <p class="font-medium text-lg">Tomorrow, 9:00 AM</p>
                                <p class="text-ayur-dark-text">Patient: **Priya M.**</p>
                                <p class="text-gray-600">Therapy: Nasya</p>
                            </div>
                            <div class="bg-ayur-cream p-4 rounded-lg shadow-sm">
                                <p class="font-medium text-lg">Tomorrow, 10:00 AM</p>
                                <p class="text-ayur-dark-text">Patient: **John Doe**</p>
                                <p class="text-gray-600">Therapy: Vamana</p>
                            </div>
                            <div class="bg-ayur-cream p-4 rounded-lg shadow-sm">
                                <p class="font-medium text-lg">Tomorrow, 11:30 AM</p>
                                <p class="text-ayur-dark-text">Patient: **Sophia Miller**</p>
                                <p class="text-gray-600">Therapy: Nasya</p>
                            </div>
                            <div class="bg-ayur-cream p-4 rounded-lg shadow-sm">
                                <p class="font-medium text-lg">September 25, 2:00 PM</p>
                                <p class="text-ayur-dark-text">Patient: **Noah Rodriguez**</p>
                                <p class="text-gray-600">Therapy: Basti</p>
                            </div>
                            <div class="bg-ayur-cream p-4 rounded-lg shadow-sm">
                                <p class="font-medium text-lg">September 26, 9:00 AM</p>
                                <p class="text-ayur-dark-text">Patient: **Emily Davis**</p>
                                <p class="text-gray-600">Therapy: Basti</p>
                            </div>
                        </div>
                    </div>
                `;
            }

            function renderReports() {
                contentContainer.innerHTML = `
                    <div class="bg-white p-6 rounded-2xl shadow-lg">
                        <h2 class="text-2xl font-semibold mb-6 text-ayur-brown">Custom Reports</h2>
                        <div class="space-y-4">
                            <div>
                                <label class="block text-gray-700 font-medium mb-1">Report Type</label>
                                <select id="reportType" class="w-full p-2 border border-gray-300 rounded-md">
                                    <option>Patient Admissions Report</option>
                                    <option>Therapy Performance Report</option>
                                    <option>Revenue Analysis</option>
                                    <option>Inventory Usage</option>
                                </select>
                            </div>
                            <div>
                                <label class="block text-gray-700 font-medium mb-1">Date Range</label>
                                <input id="startDate" type="date" class="w-full p-2 border border-gray-300 rounded-md">
                                <p class="text-sm text-gray-500 mt-1">to</p>
                                <input id="endDate" type="date" class="w-full p-2 border border-gray-300 rounded-md">
                            </div>
                            <button id="generateReportBtn" class="bg-ayur-green text-white px-4 py-2 rounded-lg font-medium transition-colors hover:bg-ayur-brown">Generate Report</button>
                        </div>
                    </div>
                `;
                setupReportGenerator();
            }

            function renderInventory() {
                contentContainer.innerHTML = `
                    <div class="bg-white p-6 rounded-2xl shadow-lg">
                        <div class="flex justify-between items-center mb-4">
                            <h2 class="text-xl font-semibold text-ayur-brown">Inventory Stock</h2>
                            <div class="flex space-x-2">
                                <button id="downloadPdfBtn" class="bg-ayur-green text-white px-4 py-2 rounded-lg font-medium transition-colors hover:bg-ayur-brown">Download PDF</button>
                                <button id="exportExcelBtn" class="bg-ayur-green text-white px-4 py-2 rounded-lg font-medium transition-colors hover:bg-ayur-brown">Export Excel</button>
                            </div>
                        </div>
                        <div class="overflow-x-auto">
                            <table id="inventoryTable" class="min-w-full divide-y divide-gray-200">
                                <thead class="bg-ayur-cream">
                                    <tr>
                                        <th scope="col" class="px-6 py-3 text-left text-xs font-semibold uppercase tracking-wider text-ayur-brown">Item</th>
                                        <th scope="col" class="px-6 py-3 text-left text-xs font-semibold uppercase tracking-wider text-ayur-brown">Quantity</th>
                                        <th scope="col" class="px-6 py-3 text-left text-xs font-semibold uppercase tracking-wider text-ayur-brown">Unit</th>
                                        <th scope="col" class="px-6 py-3 text-left text-xs font-semibold uppercase tracking-wider text-ayur-brown">Status</th>
                                    </tr>
                                </thead>
                                <tbody class="bg-white divide-y divide-gray-200">
                                    <!-- Increased mock data here -->
                                    <tr>
                                        <td class="px-6 py-4 whitespace-nowrap">Brahmi Oil</td>
                                        <td class="px-6 py-4 whitespace-nowrap">15</td>
                                        <td class="px-6 py-4 whitespace-nowrap">Bottles</td>
                                        <td class="px-6 py-4 whitespace-nowrap"><span class="px-2 inline-flex text-xs leading-5 font-semibold rounded-full bg-ayur-light-green text-ayur-green">In Stock</span></td>
                                    </tr>
                                    <tr>
                                        <td class="px-6 py-4 whitespace-nowrap">Triphala Powder</td>
                                        <td class="px-6 py-4 whitespace-nowrap">4.5</td>
                                        <td class="px-6 py-4 whitespace-nowrap">kg</td>
                                        <td class="px-6 py-4 whitespace-nowrap"><span class="px-2 inline-flex text-xs leading-5 font-semibold rounded-full bg-red-100 text-red-800">Low Stock</span></td>
                                    </tr>
                                    <tr>
                                        <td class="px-6 py-4 whitespace-nowrap">Sesame Oil</td>
                                        <td class="px-6 py-4 whitespace-nowrap">35</td>
                                        <td class="px-6 py-4 whitespace-nowrap">Liters</td>
                                        <td class="px-6 py-4 whitespace-nowrap"><span class="px-2 inline-flex text-xs leading-5 font-semibold rounded-full bg-ayur-light-green text-ayur-green">In Stock</span></td>
                                    </tr>
                                    <tr>
                                        <td class="px-6 py-4 whitespace-nowrap">Ashwagandha</td>
                                        <td class="px-6 py-4 whitespace-nowrap">20</td>
                                        <td class="px-6 py-4 whitespace-nowrap">kg</td>
                                        <td class="px-6 py-4 whitespace-nowrap"><span class="px-2 inline-flex text-xs leading-5 font-semibold rounded-full bg-ayur-light-green text-ayur-green">In Stock</span></td>
                                    </tr>
                                    <tr>
                                        <td class="px-6 py-4 whitespace-nowrap">Castor Oil</td>
                                        <td class="px-6 py-4 whitespace-nowrap">5</td>
                                        <td class="px-6 py-4 whitespace-nowrap">Bottles</td>
                                        <td class="px-6 py-4 whitespace-nowrap"><span class="px-2 inline-flex text-xs leading-5 font-semibold rounded-full bg-red-100 text-red-800">Low Stock</span></td>
                                    </tr>
                                    <tr>
                                        <td class="px-6 py-4 whitespace-nowrap">Dashamoola</td>
                                        <td class="px-6 py-4 whitespace-nowrap">12</td>
                                        <td class="px-6 py-4 whitespace-nowrap">kg</td>
                                        <td class="px-6 py-4 whitespace-nowrap"><span class="px-2 inline-flex text-xs leading-5 font-semibold rounded-full bg-ayur-light-green text-ayur-green">In Stock</span></td>
                                    </tr>
                                </tbody>
                            </table>
                        </div>
                    </div>
                `;
                setupExportButtons();
            }

            // Function to initialize charts for the dashboard page
            function initializeDashboardCharts() {
                const admissionsData = {
                    // Adjusted for higher activity
                    labels: ['Jan', 'Feb', 'Mar', 'Apr', 'May', 'Jun', 'Jul', 'Aug', 'Sep'],
                    datasets: [{
                        label: 'New Patient Admissions',
                        data: [25, 35, 40, 38, 45, 50, 55, 52, 60],
                        fill: true,
                        borderColor: 'rgb(75, 192, 192)',
                        tension: 0.1
                    }]
                };

                const therapiesData = {
                    labels: ['Vamana', 'Virechana', 'Basti', 'Nasya'],
                    datasets: [{
                        label: 'Therapies Performed',
                        data: [350, 250, 450, 300], // Increased numbers
                        backgroundColor: [
                            '#A5D6A7', // Light Green
                            '#4CAF50', // Green
                            '#795548', // Brown
                            '#D7CCC8'  // Light Brown
                        ],
                        hoverOffset: 4
                    }]
                };

                const durationData = {
                    labels: ['Vamana', 'Virechana', 'Basti', 'Nasya'],
                    datasets: [{
                        label: 'Avg. Duration (Days)',
                        data: [7, 8, 10, 5],
                        backgroundColor: [
                            '#4CAF50',
                            '#795548',
                            '#A5D6A7',
                            '#D7CCC8'
                        ],
                        borderColor: 'rgba(0,0,0,0)',
                        borderWidth: 1
                    }]
                };

                myCharts.admissionsChart = new Chart(document.getElementById('admissionsChart'), {
                    type: 'line',
                    data: admissionsData,
                    options: { responsive: true, plugins: { legend: { display: false } }, scales: { y: { beginAtZero: true } } }
                });

                myCharts.therapiesChart = new Chart(document.getElementById('therapiesChart'), {
                    type: 'pie',
                    data: therapiesData,
                    options: { responsive: true, plugins: { legend: { position: 'bottom' } } }
                });

                myCharts.durationChart = new Chart(document.getElementById('durationChart'), {
                    type: 'bar',
                    data: durationData,
                    options: { responsive: true, plugins: { legend: { display: false } }, scales: { y: { beginAtZero: true } } }
                });
            }

            // Function to set up export buttons for tables
            function setupExportButtons() {
                const downloadPdfBtn = document.getElementById('downloadPdfBtn');
                const exportExcelBtn = document.getElementById('exportExcelBtn');
                
                if (downloadPdfBtn && exportExcelBtn) {
                    const tableToExport = document.querySelector('table');

                    // PDF Export Functionality
                    downloadPdfBtn.addEventListener('click', () => {
                        if (!tableToExport) return;

                        // Create a temporary element to capture, excluding the buttons themselves if needed
                        const tableContainer = tableToExport.closest('div.overflow-x-auto') || tableToExport.parentElement; 
                        
                        html2canvas(tableContainer).then(canvas => {
                            const imgData = canvas.toDataURL('image/png');
                            const pdf = new window.jspdf.jsPDF();
                            const imgProps = pdf.getImageProperties(imgData);
                            const pdfWidth = pdf.internal.pageSize.getWidth();
                            const pdfHeight = (imgProps.height * pdfWidth) / imgProps.width;
                            pdf.addImage(imgData, 'PNG', 0, 0, pdfWidth, pdfHeight);
                            pdf.save("report.pdf");
                        });
                    });

                    // Excel Export Functionality
                    exportExcelBtn.addEventListener('click', () => {
                        if (!tableToExport) return;

                        TableExport(tableToExport, {
                            formats: ['xlsx'],
                            filename: 'report'
                        });
                    });
                }
            }

            // Function to set up the report generator (for the "Reports" page)
            function setupReportGenerator() {
                const generateReportBtn = document.getElementById('generateReportBtn');
                const startDateInput = document.getElementById('startDate');
                const endDateInput = document.getElementById('endDate');
                const reportTypeSelect = document.getElementById('reportType');

                if (generateReportBtn) {
                    generateReportBtn.addEventListener('click', () => {
                        const startDate = startDateInput.value;
                        const endDate = endDateInput.value;
                        const reportType = reportTypeSelect.value;

                        // Create a mock report element
                        const reportContent = document.createElement('div');
                        reportContent.id = "reportContent";
                        reportContent.classList.add('p-8', 'bg-white', 'rounded-lg', 'shadow-lg');
                        reportContent.innerHTML = `
                            <h3 class="text-2xl font-bold mb-4 text-center">Panchakarma Report</h3>
                            <h4 class="text-xl font-semibold mb-2">${reportType}</h4>
                            <p class="text-ayur-brown mb-4">Date Range: ${startDate || 'N/A'} to ${endDate || 'N/A'}</p>
                            <p class="mb-4">This is a mock report generated based on the selected criteria. Real data and charts would be displayed here.</p>
                            <div class="border-t border-b border-gray-200 py-4">
                                <p class="font-semibold text-ayur-dark-text">Summary of Findings:</p>
                                <ul class="list-disc list-inside mt-2 text-gray-700">
                                    <li>Patient admissions saw a steady increase during this period.</li>
                                    <li>Vamana and Basti therapies were the most popular treatments.</li>
                                    <li>Key inventory items like Brahmi Oil and Triphala Powder are in high demand.</li>
                                </ul>
                            </div>
                            <p class="text-sm text-gray-500 mt-4 text-center">Report Generated on: ${new Date().toLocaleDateString()}</p>
                        `;

                        // Temporarily append the report content to the body to be captured
                        document.body.appendChild(reportContent);

                        // Use html2canvas and jspdf to generate and download the PDF
                        html2canvas(reportContent, { scale: 2 }).then(canvas => {
                            const imgData = canvas.toDataURL('image/png');
                            const pdf = new window.jspdf.jsPDF('p', 'mm', 'a4');
                            const imgProps = pdf.getImageProperties(imgData);
                            const pdfWidth = pdf.internal.pageSize.getWidth();
                            const pdfHeight = (imgProps.height * pdfWidth) / imgProps.width;
                            pdf.addImage(imgData, 'PNG', 0, 0, pdfWidth, pdfHeight);
                            pdf.save(`${reportType.replace(/\s/g, '-')}-${startDate}-to-${endDate}.pdf`);

                            // Remove the temporary element
                            reportContent.remove();
                        });
                    });
                }
            }
        });
    </script>
</body>
</html>
